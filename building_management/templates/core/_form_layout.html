{% load i18n %}
{# Generic form layout used by all create/update pages #}
<section class="space-y-6">
  <header class="space-y-1">
    <h1 class="text-2xl font-semibold text-brand-foreground dark:text-white">{{ title }}</h1>
    {% if subtitle %}<p class="text-sm text-slate-500 dark:text-slate-400">{{ subtitle }}</p>{% endif %}
  </header>

  <form method="post" novalidate class="space-y-6"{% if form.is_multipart %} enctype="multipart/form-data"{% endif %}>
    {% csrf_token %}
    {% if next_url %}
      <input type="hidden" name="next" value="{{ next_url }}"/>
    {% endif %}

    {% if form.non_field_errors %}
      <div class="alert alert--danger">
        {% for e in form.non_field_errors %}<div>{{ e }}</div>{% endfor %}
      </div>
    {% endif %}

    {% for h in form.hidden_fields %}
      {{ h }}
      {% if h.errors %}
        <div class="errors">{% for e in h.errors %}<div>{{ e }}</div>{% endfor %}</div>
      {% endif %}
    {% endfor %}

    <div class="grid gap-5">
      {% if form.owner %}
        {% include "core/includes/form_field.html" with field=form.owner only %}
      {% endif %}
      {% for field in form.visible_fields %}
        {% if not form.owner or field.name != 'owner' %}
          {% include "core/includes/form_field.html" with field=field %}
        {% endif %}
      {% endfor %}
    </div>

    <div class="flex flex-wrap justify-end gap-3">
      <button class="btn" type="submit">{% trans "Save" %}</button>
      <a class="btn btn-secondary" href="{{ cancel_url|default:'javascript:history.back()' }}">{% trans "Cancel" %}</a>
    </div>
  </form>
</section>
