{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "Reset password" %} Â· {% trans "Building Management" %}{% endblock %}
{% block content %}
<section class="space-y-6">
  <header>
    <h1 class="text-3xl font-semibold text-brand-foreground dark:text-white">{% trans "Reset password" %}</h1>
    <p class="text-sm text-slate-500 dark:text-slate-400">
      {% blocktrans with username=managed_user.get_full_name|default:managed_user.username %}
        Choose a new password for {{ username }}. They will be prompted to use it on next sign in.
      {% endblocktrans %}
    </p>
  </header>

  <form method="post" class="space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-card dark:border-slate-700 dark:bg-slate-900">
    {% csrf_token %}
    {% if form.non_field_errors %}
      <div class="alert alert--error">
        {{ form.non_field_errors }}
      </div>
    {% endif %}

    <div class="grid grid-cols-1 gap-4 md:max-w-3xl md:grid-cols-2 md:items-start md:gap-6">
      {% for field in form %}
        <div class="space-y-2">
          <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-slate-600 dark:text-slate-300">
            {{ field.label }}
          </label>
          {{ field }}
          {% if field.name == "new_password1" %}
            <p class="text-xs text-slate-500 dark:text-slate-400">
              {% trans "Your password can't be too similar to your other personal information." %}<br>
              {% trans "Your password must contain at least 8 characters." %}<br>
              {% trans "Your password can't be a commonly used password." %}<br>
              {% trans "Your password can't be entirely numeric." %}
            </p>
          {% elif field.help_text %}
            <p class="text-xs text-slate-500 dark:text-slate-400">{{ field.help_text }}</p>
          {% endif %}
          {% if field.errors %}
            <p class="text-sm text-rose-600 dark:text-rose-400">{{ field.errors|striptags }}</p>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    <div class="flex flex-wrap justify-end gap-3">
      <button class="btn" type="submit">{% trans "Save new password" %}</button>
      <a class="btn btn-secondary" href="{% url 'users_list' %}">{% trans "Cancel" %}</a>
    </div>
  </form>
</section>
{% endblock %}
